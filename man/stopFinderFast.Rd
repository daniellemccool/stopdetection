% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stopFinderFast.R
\name{stopFinderFast}
\alias{stopFinderFast}
\title{Detect Stop Points in GPS Trajectories}
\usage{
stopFinderFast(traj, thetaD, thetaT)
}
\arguments{
\item{traj}{A \link[data.table:data.table]{data.table::data.table} ordered by \code{timestamp}, containing columns:
\itemize{
\item \code{timestamp} - Time of observation (numeric or POSIXct)
\item \code{longitude} - Longitude in decimal degrees
\item \code{latitude} - Latitude in decimal degrees
}}

\item{thetaD}{Distance threshold in meters. Points within this radius
of the initiating location are considered part of the same potential stop.}

\item{thetaT}{Time threshold in same units as \code{timestamp}. Minimum duration
required to qualify as a stop.}
}
\value{
Modifies \code{traj} by reference, adding columns:
\itemize{
\item \code{stop_initiation_idx} - Row index of stop start (\code{NA} if moving)
\item \code{state_id} - Integer ID for each contiguous state segment
\item \code{state} - Factor: \code{"stopped"} or \code{"moving"}
\item \code{timedif} - Time elapsed since previous point
}
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#experimental}{\figure{lifecycle-experimental.svg}{options: alt='[Experimental]'}}}{\strong{[Experimental]}}

Identifies stop points in timestamped GPS data using spatiotemporal
clustering. A stop is detected when a sequence of points remains within
a specified distance radius for at least a minimum time duration.
}
\details{
This is a C++ implementation of \code{\link[=stopFinder]{stopFinder()}}, offering ~500x speedup.
Optimized for repeated calls in simulation studies; input validation
should be performed beforehand.
}
\section{Warning}{

Input must be pre-sorted by \code{timestamp} with correctly named columns.
No error checking is performed for efficiency.
}

\examples{
library(data.table)
dt <- data.table(
  entity_id = 1L,
  timestamp = c(
    1, 2, 4, 10, 14, 18, 20, 21, 24, 25, 28, 29, 45, 80, 100,
    120, 200, 270, 300, 340, 380, 450, 455, 460, 470, 475, 490
  ),
  longitude = c(
    5.1299311, 5.129979, 5.129597, 5.130028, 5.130555, 5.131083,
    5.132101, 5.132704, 5.133326, 5.133904, 5.134746, 5.135613,
    5.135613, 5.135613, 5.135613, 5.135613, 5.135613, 5.135613,
    5.135613, 5.135613, 5.135613, 5.135613, 5.134746, 5.133904,
    5.133326, 5.132704, 5.132101
  ),
  latitude = c(
    52.092839, 52.092827, 52.092571, 52.092292, 52.092076,
    52.091821, 52.091420, 52.091219, 52.091343, 52.091651,
    52.092138, 52.092698, 52.092698, 52.092698, 52.092698,
    52.092698, 52.092698, 52.092698, 52.092698, 52.092698,
    52.092698, 52.092138, 52.091651, 52.091343, 52.091219,
    52.091420, 52.091821
  )
)

stopFinderFast(dt, thetaD = 50, thetaT = 400)

# Visualize results
plot(dt$longitude, dt$latitude,
  type = "b", pch = 20,
  main = "Stop Detection", xlab = "Longitude", ylab = "Latitude"
)
points(dt[state == "stopped", .(longitude, latitude)],
  col = "red", pch = 20
)
}
\references{
Li, Q., et al. (2008). Mining user similarity based on location history.
\emph{ACM SIGSPATIAL}.
}
\seealso{
\code{\link[=stopFinder]{stopFinder()}} for the reference R implementation

Other stop-detection: 
\code{\link{stopFinder}()},
\code{\link{stopFinder_cpp}()}
}
\concept{stop-detection}
